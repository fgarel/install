静的タイルの配信について
========================

背景
----

OpenStreetMapは、オン・ザ・グラウンドルールを採用しています。

紛争が議論で解決できない場合、シンプルなデフォルトのルールは、その位置の地上に
いる人々が使っているものはどのような名前、記号、等々であれ、非ローカライズタグ
つまり、"name="タグで使われる、というものです。
従って、例えば北部キプロスの場合は、これはトルコ名になります。例えば、北方領土や
竹島の場合は、その住民がつけたロシアの文字や韓国の文字の看板があり、それが名称と
して付けられることになります。

複数のローカル名がある場合は、そのエリアで効果的、持続的に統治している政府が
公式に名前のソースを持っている場合、あるいは命名の紛争について公式なスタンスを
持っている場合は、その名前が既定で採用されます。その統治が、国際法のうえで
公式なものかどうか、は、政治に属する議論であり、本ルールには影響しませんが、
特別な配慮を必要とするかもしれません。

エリアにはっきりと持続的な統治が存在しない場合、例えばコソボ、ケースバイケースの
基準に基づく特別な考慮が必要になります。
(コソボは現在では多くの他国に認知された独立政府を持っているので、いまではやや
このケースとの関連性は薄れています。)

OpenStreetMap は政治のためのフォーラムではなく、理解のための手段です。紛争は
マップではなく、議論に落ち込まれるべきです。これに従わなかったり、そのエリアでの
合意、あるいは究極的には"現地"ルールに敬意を払わなかったりする編集者は誰であれ、
OpenStreetMapに参加する権利を失うリスクを犯すことになります。

国境紛争地域など
---

上記にかかわらず、特定の地域において、地図サービスを提供するものは、その特定
地域に発布される法令に制約されます。よくあるケースとして、法人、個人の提供する
地図サービスにおいて、法人・個人の住居のある国が主張する国境線を表示しなければ
ならない、というものです。

国境紛争地域や、その国が自国の領土と主張している場合など、OpenStreetMapが
その中立的なルールに従って世界のボランティアが整備したデータが、法令を満たさない
場合がありえます。
あるいは、複数の国の相互に矛盾するルールを満たすことは、単一のデータでは不可能です。

一般に、このような場合、事業者は、利用者がアクセスしてくるIPアドレスが存在する国に
よって、表示を切り替えることによって、コンプライアンスと利用者の利便、中立性を
同時に満たそうとします。

静的タイルの置き換え提供
-----------

このタイルキャッシュシステムでは、静的に作られたタイルで、OpenStreetMapのタイルを
置き換えて配信することができます。
また、GeoIPデータベースを利用して、アクセス元の国によって、配信するタイルを切り替える
ことすら出来ます。

これと、オープンなデータを維持することは矛盾しません。
OpenStreetMapのデータが、特定の国の主張によって中立性やルールを曲げられることは
なく、つねに自由であり、その統治は参加者の議論に委ね続けられます。

サンプルデータ
------------

このプログラムには、日本国と大韓民国の間で国境紛争地域となっているLiancourt Rocks,
日本名で竹島、韓国名で独島について、OpenStreetMapのデータを改変してレンダリング
したタイル画像がデータとして添付されています。

置き換えの方法
-------------

    nginx/sites/statictile

に、置き換え配信のための設定サンプルがおいてあります。
/var/opt/tileserver/static
に、z/x/y.pngの形式で、タイル画像を格納することで、対応するタイル画像については
置き換えて配信されるようになります。

本サンプルでは、

    nginx/conf.d/geoip.conf

に設定されるgeoip モジュールの働きにより、アクセスしてくるクライアントのIPアドレスが
存在する国によって処理を切り替えています。これを応用すれば、柔軟な処理ができる
でしょう。

免責事項
------

本ドキュメントで説明している内容によって、その正当性や法令への順守を保証する
ものではありません。また、OpenStreetMapのデータを置き換えることを推奨している
ものでもありません。事業者が、コンプライアンスのために、最小のコスト、リスクで
OpenStreetMapを活用することを支援することを意図しているものです。








